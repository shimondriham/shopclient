(this["webpackJsonpreact-atidim"]=this["webpackJsonpreact-atidim"]||[]).push([[0],{37:function(e,t,c){},38:function(e,t,c){},40:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},68:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(17),s=c.n(a),o=(c(37),c(38),c(6)),i=c(7),l=c(8),d=c(0);var j=function(e){return Object(d.jsx)("div",{style:{backgroundImage:"url(https://images.unsplash.com/photo-1593277992013-05e17a5f417d?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80)"},className:"strip_home container-fluid d-flex align-items-center",children:Object(d.jsxs)("div",{className:"container text-center",children:[Object(d.jsx)("h2",{className:"h1",children:"Welcome to The gaming world!"}),Object(d.jsx)("h5",{children:"Shop that you can find everthing about gaming"})]})})},b=(c(40),c(2)),u=c.n(b),h=c(4),m=c(3),O=c(22),x=c.n(O),p="https://shimonshop.herokuapp.com",f=function(){var e=Object(h.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get(t,{headers:{"x-api-key":localStorage.tok,"content-type":"application/json"}});case 3:return c=e.sent,e.abrupt("return",c);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(h.a)(u.a.mark((function e(t,c,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()({method:c,url:t,data:JSON.stringify(n),headers:{"x-api-key":localStorage.tok,"content-type":"application/json"}});case 3:return r=e.sent,e.abrupt("return",r);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c,n){return e.apply(this,arguments)}}();var v=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1];Object(n.useEffect)((function(){s()}),[]);var s=function(){var e=Object(h.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/categories",e.next=3,f("https://shimonshop.herokuapp.com/categories");case 3:t=e.sent,console.log(t.data),a(t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"container-fluid shadow",children:Object(d.jsxs)("div",{className:"container py-4 categories_list",children:[Object(d.jsx)("h2",{className:"text-center",children:"Choose category of products you want to buy:"}),Object(d.jsx)("div",{className:"row",children:r.map((function(e){return Object(d.jsx)(o.b,{to:"/products/"+e.url_name,className:"myCard col-md-4 p-3",children:Object(d.jsxs)("div",{className:"shadow  bg-dark text-white",children:[Object(d.jsx)("div",{style:{backgroundImage:"url(".concat(e.img_url||"/images/cover.jpg",")")},className:"img_card"}),Object(d.jsx)("h3",{className:"p-2",children:e.name})]})},e._id)}))})]})})},N="visitedProduct",k="tok",w="cart_shop",y=function(e){var t=localStorage.visitedProduct?localStorage.visitedProduct.split(","):[];t.includes(e)||(t.unshift(e),t.splice(4,t.length),localStorage.setItem(N,t.join(",")))},_=c(14),S=Object(n.createContext)(null);var C=function(e){var t=e.item,c=Object(n.useContext)(S),r=c.favs_ar,a=c.addRemoveFav;return Object(d.jsx)("div",{className:"product-item col-md-3 p-2",children:Object(d.jsxs)("div",{className:"shadow",children:[Object(d.jsxs)("div",{style:{backgroundImage:"url(".concat(t.img_url||"/images/cover.jpg",")")},className:"product-img",children:["  ",0===t.qty?Object(d.jsx)("div",{className:"sold-out",children:"Sold out!"}):""]}),Object(d.jsxs)("div",{className:"p-2",children:[Object(d.jsx)("h4",{children:t.name}),Object(d.jsxs)("div",{children:["Price: ",t.price," NIS"]}),Object(d.jsxs)("div",{className:"text-center my-2",children:[r.includes(t.short_id)?Object(d.jsx)("button",{onClick:function(){a(t.short_id)},className:"btn btn-warning",children:Object(d.jsx)(_.d,{className:"mb-1"})}):Object(d.jsx)("button",{onClick:function(){a(t.short_id)},className:"btn btn-dark",children:Object(d.jsx)(_.c,{className:"mb-1"})}),Object(d.jsx)(o.b,{className:"btn btn-dark w-50",to:"/productInfo/"+t._id,children:"More info"})]})]})]})})};var L=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1];Object(n.useEffect)((function(){s()}),[]);var s=function(){var e=Object(h.a)(u.a.mark((function e(){var t,c,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.visitedProduct?localStorage.visitedProduct:null,c=t?p+"/products/visited?visited="+t:p+"/products?perPage=4",e.next=4,f(c);case 4:n=e.sent,console.log(n.data),a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container py-4",children:[localStorage.visitedProduct?Object(d.jsx)("h2",{className:"text-center text-info",children:"Products you intersted in"}):Object(d.jsx)("h2",{className:"text-center",children:"New products in our store"}),Object(d.jsx)("div",{className:"row",children:r.map((function(e){return Object(d.jsx)(C,{item:e},e._id)}))})]})};var E=function(e){return Object(d.jsxs)(r.a.Fragment,{children:[Object(d.jsx)(j,{}),Object(d.jsx)(v,{}),Object(d.jsx)(L,{})]})},P=c(9);var q=function(e){return Object(d.jsx)("footer",{className:"footer-client container-fluid bg-dark text-white",children:Object(d.jsx)("div",{className:"container text-center",children:"All rights reserved to  Shimon Driham - 2022"})})};var T=function(e){var t=Object(n.useContext)(S),c=t.showCart,a=t.setShowCart,s=Object(n.useState)(""),l=Object(m.a)(s,2),j=l[0],b=l[1],u=Object(n.useRef)(),h=Object(i.f)(),O=Object(i.g)();Object(n.useEffect)((function(){b(!!localStorage.tok&&localStorage.tok)}),[h]);var x=function(){var e=u.current.value;O("/productsSearch?s="+e)};return Object(d.jsx)("header",{className:"shadow header-client container-fluid",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"row justify-content-between align-items-center",children:[Object(d.jsx)("div",{className:"logo col-md-auto",children:Object(d.jsx)(o.b,{to:"/",children:Object(d.jsx)("h2",{children:"The gaming world"})})}),Object(d.jsx)("nav",{className:"col-md-auto",children:Object(d.jsxs)("div",{className:"d-md-flex align-items-center",children:[Object(d.jsxs)("div",{className:"links_header me-md-3",children:[Object(d.jsx)(o.b,{to:"/checkout",children:"Checkout"}),Object(d.jsx)(o.b,{to:"/products_favs",children:"Favorites"}),Object(d.jsx)(o.b,{to:"/oldOrders",children:"Old orders"})]}),Object(d.jsxs)("div",{className:"search_header d-flex",children:[Object(d.jsx)("input",{onKeyDown:function(e){"Enter"==e.key&&x()},ref:u,placeholder:"search...",type:"text",className:"form-control"}),Object(d.jsx)("button",{onClick:x,className:"btn",children:Object(d.jsx)(_.b,{className:"icon1"})}),Object(d.jsx)("button",{onClick:function(){a("none"===c?"block":"none")},className:"btn",children:Object(d.jsx)(_.a,{className:"icon1"})})]}),Object(d.jsx)("div",{className:"log_in_out",children:j?Object(d.jsx)(o.b,{to:"/logout",children:"Log out"}):Object(d.jsxs)(r.a.Fragment,{children:[Object(d.jsx)(o.b,{to:"/login",children:"Log in"}),"/",Object(d.jsx)(o.b,{to:"/signup",children:"Sign up"})]})})]})})]})})})};c(60),c(61),c(62);var A=function(e){var t=Object(n.useContext)(S),c=t.cart_ar,r=t.updateCart,a=e.item;return Object(d.jsxs)("div",{className:"border pt-2 px-2 overflow-hidden",children:[Object(d.jsx)("button",{onClick:function(){var e=c.filter((function(e){return e._id!=a._id}));r(e)},className:"float-end badge bg-danger ms-2",children:"X"}),Object(d.jsxs)("h5",{className:"float-end",children:[a.price," Nis"]}),Object(d.jsxs)("h5",{children:[a.name," "]})]})};var I=function(e){var t=Object(n.useState)(0),c=Object(m.a)(t,2),r=c[0],a=c[1],s=Object(n.useContext)(S),o=s.showCart,i=s.setShowCart,l=s.cart_ar;return Object(n.useEffect)((function(){var e=0;l.forEach((function(t){e+=t.price})),a(e)}),[l]),Object(d.jsxs)("div",{style:{display:o},className:"cart",children:[Object(d.jsx)("button",{className:"btn btn-danger close-btn",onClick:function(){i("none")},children:"close"}),Object(d.jsx)("h2",{className:"p-2",children:"Products in carts:"}),l.map((function(e){return Object(d.jsx)(A,{item:e},e._id)})),Object(d.jsxs)("h2",{className:"p-2",children:["Total: ",r," Nis"]})]})};var U=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)([]),o=Object(m.a)(s,2),j=o[0],b=o[1],O=Object(n.useState)("none"),x=Object(m.a)(O,2),v=x[0],N=x[1];Object(n.useEffect)((function(){y(),b(localStorage[w]?JSON.parse(localStorage[w]):[])}),[]);var k=function(e){var t;b(e),t=e,localStorage.setItem(w,JSON.stringify(t))},y=function(){var e=Object(h.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.tok){e.next=15;break}return p+"/favs/",e.prev=2,e.next=5,f("https://shimonshop.herokuapp.com/favs/");case 5:t=e.sent,console.log(t.data),t.data.favs_ar&&a(t.data.favs_ar),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0.response);case 13:e.next=16;break;case 15:a([]);case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(h.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.tok){e.next=15;break}return c=p+"/favs/add_remove/"+t,e.prev=2,e.next=5,g(c,"PATCH",{});case 5:e.sent.data.modifiedCount&&y(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.response),l.b.info("There error try again later");case 13:e.next=16;break;case 15:l.b.error("You must be logged in to add to favorite!");case 16:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(S.Provider,{value:{favs_ar:r,addRemoveFav:_,doFavApi:y,showCart:v,setShowCart:N,cart_ar:j,updateCart:k,addToCart:function(e){var t=!1;j.map((function(c){c._id==e._id&&(t=!0)})),t||k([].concat(Object(P.a)(j),[e])),N("block")}},children:[Object(d.jsx)(I,{}),Object(d.jsx)(T,{}),Object(d.jsx)(i.a,{}),Object(d.jsx)(q,{})]})},V=c(5),Y=c(11);var F=function(e){var t=Object(i.g)();Object(n.useEffect)((function(){localStorage.tok?c():(l.b.error("You must be admin to be here! or you need to login again"),t("/admin"))}),[]);var c=function(){var e=Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/users/myInfo",e.prev=1,e.next=4,f("https://shimonshop.herokuapp.com/users/myInfo");case 4:"admin"!=e.sent.data.role&&(l.b.error("You must be admin to be here! or you need to login again"),t("/admin/logout")),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response),alert("You must be admin to be here! or you need to login again"),t("/admin/logout");case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)(r.a.Fragment,{})};var H=function(e){var t=Object(n.useState)(!1),c=Object(m.a)(t,2),r=c[0],a=c[1],s=Object(i.g)(),o=Object(Y.a)(),j=o.register,b=o.handleSubmit,O=o.formState.errors,x=j("name",{required:!0,minLength:2,maxLength:150}),f=j("url_name",{required:!0,minLength:2,maxLength:500}),v=j("img_url",{required:!0,minLength:3,maxLength:500}),N=function(){var e=Object(h.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/categories",e.prev=1,e.next=4,g("https://shimonshop.herokuapp.com/categories","POST",t);case 4:e.sent.data._id&&(l.b.success("Category added"),s("/admin/categories")),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response),alert("There problem try again later"),s("/admin/categories");case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(F,{}),Object(d.jsx)("h1",{children:"Add new category"}),Object(d.jsxs)("form",{onSubmit:b((function(e){a(!0),N(e)})),className:"col-md-6 p-3 shadow",children:[Object(d.jsx)("label",{children:"Name:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},x),{},{type:"text",className:"form-control"})),O.name?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid name 2 to 99 chars"}):"",Object(d.jsx)("label",{children:"url name:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},f),{},{type:"text",className:"form-control"})),O.url_name?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid url name, between 1 to 500 chars"}):"",Object(d.jsx)("label",{children:"Image url:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},v),{},{type:"text",className:"form-control"})),O.img_url?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid url for image, between 1 to 500 chars"}):"",Object(d.jsx)("button",{className:"mt-4",disabled:r,children:"Add new category"})]})]})};var D=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(!1),o=Object(m.a)(s,2),j=o[0],b=o[1],O=Object(i.g)(),x=Object(Y.a)(),v=x.register,N=x.handleSubmit,k=x.formState.errors,w=v("name",{required:!0,minLength:2,maxLength:150}),y=v("info",{required:!0,minLength:2,maxLength:500}),_=v("price",{required:!0,min:1,max:999999}),S=v("cat_short_id",{required:!0,minLength:1,maxLength:99}),C=v("img_url",{required:!1,minLength:3,maxLength:500}),L=v("condition",{required:!1,minLength:3,maxLength:100}),E=v("qty",{required:!0,min:1,max:9999});Object(n.useEffect)((function(){P()}),[]);var P=function(){var e=Object(h.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/categories",e.next=3,f("https://shimonshop.herokuapp.com/categories");case 3:t=e.sent,console.log(t.data),a(t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(h.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/products",e.prev=1,e.next=4,g("https://shimonshop.herokuapp.com/products","POST",t);case 4:e.sent.data._id&&(l.b.success("Product added"),O("/admin/products")),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response),alert("There problem try again later"),O("/admin/products");case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(F,{}),Object(d.jsx)("h1",{children:"Add new product"}),Object(d.jsxs)("form",{onSubmit:N((function(e){b(!0),q(e)})),className:"col-md-6 p-3 shadow",children:[Object(d.jsx)("label",{children:"Name:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},w),{},{type:"text",className:"form-control"})),k.name?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid name 2 to 99 chars"}):"",Object(d.jsx)("label",{children:"Info:"}),Object(d.jsx)("textarea",Object(V.a)(Object(V.a)({},y),{},{className:"form-control",rows:"3"})),k.info?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid info, 3 to 500 chars"}):"",Object(d.jsx)("label",{children:"Price:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},_),{},{type:"number",defaultValue:"50",className:"form-control"})),k.price?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid  price, between 1 to 999999"}):"",Object(d.jsx)("label",{children:"Qty (amount in the stock):"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},E),{},{type:"number",defaultValue:"1",className:"form-control"})),k.qty?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid  qty, between 1 to 9999"}):"",Object(d.jsx)("label",{children:"Category:"}),Object(d.jsxs)("select",Object(V.a)(Object(V.a)({},S),{},{className:"form-select",children:[Object(d.jsx)("option",{value:"",children:"Choose Category"}),r.map((function(e){return Object(d.jsx)("option",{value:e.short_id,children:e.name},e._id)}))]})),k.cat_short_id?Object(d.jsx)("small",{className:"text-danger d-block",children:"You must choose category from the list "}):"",Object(d.jsx)("label",{children:"Img url:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},C),{},{type:"text",className:"form-control"})),k.img_url?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid  img url "}):"",Object(d.jsx)("label",{children:"Condition:"}),Object(d.jsxs)("select",Object(V.a)(Object(V.a)({},L),{},{className:"form-select",children:[Object(d.jsx)("option",{value:"new",children:"Brand New"}),Object(d.jsx)("option",{value:"like new",children:"Like New"}),Object(d.jsx)("option",{value:"used",children:"Used"}),Object(d.jsx)("option",{value:"broken",children:"Broken"})]})),Object(d.jsx)("button",{disabled:j,children:"Add new product"})]})]})};var R=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1],s=Object(i.g)();Object(n.useEffect)((function(){j()}),[]);var j=function(){var e=Object(h.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/categories",e.prev=1,e.next=4,f("https://shimonshop.herokuapp.com/categories");case 4:t=e.sent,a(t.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),alert("there problem come back later"),e.t0.response&&console.log(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(h.a)(u.a.mark((function e(t){var c,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete?")){e.next=15;break}return e.prev=1,c=p+"/categories/"+t,e.next=5,g(c,"DELETE",{});case 5:n=e.sent,console.log(n.data),n.data.deletedCount&&l.b.info("Category delted !"),j(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0.response),alert("there problem , try again later");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(F,{}),Object(d.jsx)("h1",{children:"List of Categoires in system"}),Object(d.jsx)(o.b,{className:"btn btn-success",to:"/admin/addcategory",children:"Add new Category"}),Object(d.jsxs)("table",{className:"table table-striped",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"#"}),Object(d.jsx)("th",{children:"name"}),Object(d.jsx)("th",{children:"url_name"}),Object(d.jsx)("th",{children:"short_id"}),Object(d.jsx)("th",{children:"del/edit"})]})}),Object(d.jsx)("tbody",{children:r.map((function(e,t){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:t+1}),Object(d.jsx)("td",{children:e.name}),Object(d.jsx)("td",{children:e.url_name}),Object(d.jsx)("td",{children:e.short_id}),Object(d.jsxs)("td",{children:[Object(d.jsx)("button",{onClick:function(){b(e._id)},className:"badge bg-danger",children:"X"}),Object(d.jsx)("button",{onClick:function(){s("/admin/editCategory/"+e.url_name)},className:"badge bg-info",children:"Edit"})]})]},e._id)}))})]}),0===r.length?Object(d.jsx)("h2",{children:"Loading..."}):""]})};var Z=function(e){var t=Object(n.useState)({}),c=Object(m.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(!1),o=Object(m.a)(s,2),j=o[0],b=(o[1],Object(i.h)()),O=Object(i.g)(),x=Object(Y.a)(),v=x.register,N=x.handleSubmit,k=x.formState.errors,w=v("name",{required:!0,minLength:2,maxLength:150}),y=v("url_name",{required:!0,minLength:2,maxLength:500}),_=v("img_url",{required:!0,minLength:3,maxLength:500});Object(n.useEffect)((function(){S()}),[]);var S=function(){var e=Object(h.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p+"/categories/single/"+b.url_name,e.next=3,f(t);case 3:c=e.sent,console.log(c.data),a(c.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(h.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=p+"/categories/"+r._id,e.prev=1,e.next=4,g(c,"PUT",t);case 4:e.sent.data.modifiedCount?(l.b.success("Category updated"),O("/admin/categories")):l.b.warning("you not change nothing"),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response),alert("There problem try again later"),O("/admin/categories");case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(F,{}),Object(d.jsx)("h1",{children:"Edit category"}),r._id?Object(d.jsxs)("form",{onSubmit:N((function(e){C(e)})),className:"col-md-6 p-3 shadow",children:[Object(d.jsx)("label",{children:"Name:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({defaultValue:r.name},w),{},{type:"text",className:"form-control"})),k.name?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid name 2 to 99 chars"}):"",Object(d.jsx)("label",{children:"url name:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({defaultValue:r.url_name},y),{},{type:"text",className:"form-control"})),k.url_name?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid url name, between 1 to 500 chars"}):"",Object(d.jsx)("label",{children:"Image url:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({defaultValue:r.img_url},_),{},{type:"text",className:"form-control"})),k.img_url?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid url for image, between 1 to 500 chars"}):"",Object(d.jsx)("button",{className:"mt-4 btn btn-warning",disabled:j,children:"update category"})]}):Object(d.jsx)("h2",{children:"Loading..."})]})};var B=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)({}),j=Object(m.a)(s,2),b=j[0],O=j[1],x=Object(i.h)(),v=Object(i.g)(),N=Object(Y.a)(),k=N.register,w=N.handleSubmit,y=N.formState.errors,_=k("name",{required:!0,minLength:2,maxLength:150}),S=k("info",{required:!0,minLength:2,maxLength:500}),C=k("price",{required:!0,min:1,max:999999}),L=k("cat_short_id",{required:!0,minLength:1,maxLength:99}),E=k("img_url",{required:!1,minLength:3,maxLength:500}),P=k("condition",{required:!1,minLength:3,maxLength:100}),q=k("qty",{required:!0,min:1,max:9999});Object(n.useEffect)((function(){T()}),[]);var T=function(){var e=Object(h.a)(u.a.mark((function e(){var t,c,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/categories",e.next=3,f("https://shimonshop.herokuapp.com/categories");case 3:return t=e.sent,a(t.data),c=p+"/products/single/"+x.id,e.next=8,f(c);case 8:n=e.sent,console.log(n.data),O(n.data);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(h.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=p+"/products/"+x.id,e.prev=1,e.next=4,g(c,"PUT",t);case 4:e.sent.data.modifiedCount?(l.b.success("Product updated"),v("/admin/products")):l.b.warning("You not change nothing for update."),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response),alert("There problem try again later");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(F,{}),Object(d.jsx)("h1",{children:"Edit product"}),b._id?Object(d.jsxs)("form",{onSubmit:w((function(e){A(e)})),className:"col-md-6 p-3 shadow",children:[Object(d.jsx)("label",{children:"Name:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({defaultValue:b.name},_),{},{type:"text",className:"form-control"})),y.name?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid name 2 to 99 chars"}):"",Object(d.jsx)("label",{children:"Info:"}),Object(d.jsx)("textarea",Object(V.a)(Object(V.a)({defaultValue:b.info},S),{},{className:"form-control",rows:"3"})),y.info?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid info, 3 to 500 chars"}):"",Object(d.jsx)("label",{children:"Price:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({defaultValue:b.price},C),{},{type:"number",className:"form-control"})),y.price?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid  price, between 1 to 999999"}):"",Object(d.jsx)("label",{children:"Qty (amount in the stock):"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({defaultValue:b.qty},q),{},{type:"number",className:"form-control"})),y.qty?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid  qty, between 1 to 9999"}):"",Object(d.jsx)("label",{children:"Category:"}),Object(d.jsxs)("select",Object(V.a)(Object(V.a)({defaultValue:b.cat_short_id},L),{},{className:"form-select",children:[Object(d.jsx)("option",{value:"",children:"Choose Category"}),r.map((function(e){return Object(d.jsx)("option",{value:e.short_id,children:e.name},e._id)}))]})),y.cat_short_id?Object(d.jsx)("small",{className:"text-danger d-block",children:"You must choose category from the list "}):"",Object(d.jsx)("label",{children:"Img url:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({defaultValue:b.img_url},E),{},{type:"text",className:"form-control"})),y.img_url?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid  img url "}):"",Object(d.jsx)("label",{children:"Condition:"}),Object(d.jsxs)("select",Object(V.a)(Object(V.a)({defaultValue:b.condition},P),{},{className:"form-select",children:[Object(d.jsx)("option",{value:"new",children:"Brand New"}),Object(d.jsx)("option",{value:"like new",children:"Like New"}),Object(d.jsx)("option",{value:"used",children:"Used"}),Object(d.jsx)("option",{value:"broken",children:"Broken"})]})),Object(d.jsx)("button",{className:"btn btn-info me-2",children:"Update Product"}),Object(d.jsx)(o.b,{className:"btn btn-danger",to:"/admin/products",children:"Canel"})]}):Object(d.jsx)("h2",{children:"Loading..."})]})};var M=function(e){var t=Object(i.g)();return Object(d.jsxs)("div",{className:"header_admin container-fluid bg-dark d-flex align-items-center",children:[Object(d.jsx)("h2",{className:"text-white col-auto me-4",children:"Admin panel"}),Object(d.jsxs)("nav",{className:"col-md-9",children:[Object(d.jsx)(o.b,{to:"/admin/products",children:"Products"}),Object(d.jsx)(o.b,{to:"/admin/categories",children:"Categories"}),Object(d.jsx)(o.b,{to:"/admin/users",children:"Users"}),Object(d.jsx)(o.b,{to:"/admin/checkout",children:"Checkout"}),localStorage.tok?Object(d.jsx)("button",{onClick:function(){window.confirm("Are you sure you want to logout?")&&t("/admin/logout")},className:"badge bg-danger float-md-end ",children:"Log out"}):""]})]})};c(63);var J=function(e){return Object(d.jsxs)(r.a.Fragment,{children:[Object(d.jsx)(M,{}),Object(d.jsx)(i.a,{})]})};var Q=function(e){var t=Object(i.g)(),c=Object(Y.a)(),n=c.register,r=c.handleSubmit,a=c.formState.errors,s=function(){var e=Object(h.a)(u.a.mark((function e(c){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/users/login",e.prev=1,e.next=4,g("https://shimonshop.herokuapp.com/users/login","POST",c);case 4:n=e.sent,console.log(n.data),n.data.token?(localStorage.setItem("tok",n.data.token),t("/admin/products"),l.b.info("Welcome back to admin panel!")):l.b.error("There some error come back later..."),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),l.b.error(e.t0.response.data.err),console.log(e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),o=n("email",{required:!0,pattern:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i}),j=n("password",{required:!0,minLength:3});return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h1",{children:"Login to system"}),Object(d.jsxs)("form",{onSubmit:r((function(e){console.log(e),s(e)})),className:"col-md-6 p-3 border",children:[Object(d.jsx)("label",{children:"Email:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},o),{},{type:"text",className:"form-control"})),a.email?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Email invalid"}):"",Object(d.jsx)("label",{children:"Password:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},j),{},{type:"text",className:"form-control"})),a.password?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid password, min 3 chars"}):"",Object(d.jsx)("button",{className:"btn btn-info mt-4",children:"Login"})]})]})},W=c(31);var X=function(e){var t=Object(i.g)();return Object(W.useEffect)((function(){localStorage.removeItem("tok"),l.b.info("You log out from system, see you later"),t("/admin")}),[]),Object(d.jsx)("div",{children:"Please wait... you log out."})};var G=function(e){var t=Object(i.g)(),c=Object(n.useState)(0),r=Object(m.a)(c,2),a=r[0],s=r[1];Object(n.useEffect)((function(){o()}),[]);var o=function(){var t=Object(h.a)(u.a.mark((function t(){var c,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.apiUrlAmount,t.next=3,f(c);case 3:n=t.sent,s(Math.ceil(n.data.amount/e.perPage));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"my-3",children:[Object(d.jsx)("span",{children:"page: "}),Object(P.a)(Array(a)).map((function(c,n){return Object(d.jsx)("button",{className:e.clsCss,onClick:function(){t(e.urlLinkTo+"?page="+(n+1))},children:n+1},n)}))]})};var $=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(1),j=Object(m.a)(s,2),b=j[0],O=j[1],x=Object(n.useState)({}),v=Object(m.a)(x,2),N=v[0],k=v[1],w=Object(i.g)(),y=Object(i.f)();Object(n.useEffect)((function(){_()}),[y]);var _=function(){var e=Object(h.a)(u.a.mark((function e(){var t,c,n,r,s,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p+"/categories",e.next=4,f("https://shimonshop.herokuapp.com/categories");case 4:return t=e.sent,console.log(t.data),c=t.data,n={},c.forEach((function(e){n[e.short_id]=e.name})),console.log("cat",n),k(n),r=new URLSearchParams(window.location.search),s=r.get("page")||1,O(s),o=p+"/products?page="+s,e.next=17,f(o);case 17:i=e.sent,a(i.data),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),alert("there problem come back later"),e.t0.response&&console.log(e.t0.response.data);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(h.a)(u.a.mark((function e(t){var c,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete?")){e.next=15;break}return e.prev=1,c=p+"/products/"+t,e.next=5,g(c,"DELETE",{});case 5:n=e.sent,console.log(n.data),n.data.deletedCount&&l.b.info("product delted !"),_(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0.response),alert("there problem , try again later");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(F,{}),Object(d.jsx)("h1",{children:"List of products in system"}),Object(d.jsx)(o.b,{to:"/admin/addProduct",className:"btn btn-success",children:"Add new product"}),Object(d.jsx)(G,{perPage:"5",apiUrlAmount:p+"/products/amount",urlLinkTo:"/admin/products",clsCss:"btn btn-info me-1"}),Object(d.jsxs)("table",{className:"table table-striped",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"#"}),Object(d.jsx)("th",{children:"name"}),Object(d.jsx)("th",{children:"price"}),Object(d.jsx)("th",{children:"qty"}),Object(d.jsx)("th",{children:"category"}),Object(d.jsx)("th",{children:"condtion"}),Object(d.jsx)("th",{children:"short_id"}),Object(d.jsx)("th",{children:"del/edit"})]})}),Object(d.jsx)("tbody",{children:r.map((function(e,t){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:t+1+5*(b-1)}),Object(d.jsx)("td",{children:e.name}),Object(d.jsx)("td",{children:e.price}),Object(d.jsx)("td",{children:e.qty}),Object(d.jsx)("td",{children:N[e.cat_short_id]}),Object(d.jsx)("td",{children:e.condition}),Object(d.jsx)("td",{children:e.short_id}),Object(d.jsxs)("td",{children:[Object(d.jsx)("button",{onClick:function(){S(e._id)},className:"badge bg-danger",children:"X"}),Object(d.jsx)("button",{onClick:function(){w("/admin/editProduct/"+e._id)},className:"badge bg-info",children:"Edit"})]})]},e._id)}))})]}),0===r.length?Object(d.jsx)("h2",{children:"Loading..."}):""]})};var z=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1];Object(n.useEffect)((function(){s()}),[]);var s=function(){var e=Object(h.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/users/usersList",e.prev=1,e.next=4,f("https://shimonshop.herokuapp.com/users/usersList");case 4:t=e.sent,a(t.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),alert("there problem come back later"),e.t0.response&&console.log(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(h.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(h.a)(u.a.mark((function e(t,c){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p+"/users/changeRole/".concat(t,"/").concat(c),e.prev=1,e.next=4,g(n,"PATCH",{});case 4:e.sent.data.modifiedCount&&s(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),alert("there problem come back later"),e.t0.response&&console.log(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,c){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(F,{}),Object(d.jsx)("h1",{children:"List of Users in system"}),Object(d.jsxs)("table",{className:"table table-striped",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"#"}),Object(d.jsx)("th",{children:"name"}),Object(d.jsx)("th",{children:"email"}),Object(d.jsx)("th",{children:"address"}),Object(d.jsx)("th",{children:"role"}),Object(d.jsx)("th",{children:"del"})]})}),Object(d.jsx)("tbody",{children:r.map((function(e,t){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:t+1}),Object(d.jsx)("td",{children:e.name}),Object(d.jsx)("td",{children:e.email}),Object(d.jsx)("td",{children:e.address}),Object(d.jsx)("td",{children:"admin"===e.role?Object(d.jsx)("button",{onClick:function(){i(e._id,"user")},className:"btn btn-warning",children:"admin"}):Object(d.jsx)("button",{onClick:function(){i(e._id,"admin")},className:"btn btn-dark",children:"user"})}),Object(d.jsx)("td",{children:Object(d.jsx)("button",{onClick:function(){o(e._id)},className:"badge bg-danger",children:"X"})})]},e._id)}))})]}),0===r.length?Object(d.jsx)("h2",{children:"Loading..."}):""]})};var K=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(0),o=Object(m.a)(s,2),l=o[0],j=o[1],b=Object(n.useState)(0),O=Object(m.a)(b,2),x=O[0],g=O[1],v=Object(i.f)(),N=Object(i.h)();Object(n.useEffect)((function(){a([]),k()}),[v]);var k=function(){var e=Object(h.a)(u.a.mark((function e(){var t,c,n,r,s,o,i,l,d,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=p+"/categories/single/"+N.cat_url,e.next=3,f(c);case 3:return n=e.sent,r=null===(t=n.data)||void 0===t?void 0:t.short_id,j(r),s=new URLSearchParams(window.location.search),o=s.get("page")||1,i=p+"/products/?perPage=8&cat="+r+"&page="+o,e.next=11,f(i);case 11:return l=e.sent,a(l.data),d=p+"/products/amount?cat="+r,e.next=16,f(d);case 16:b=e.sent,g(b.data.amount);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"container-fluid",style:{minHeight:"85vh"},children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsxs)("h1",{className:"text-center my-4",children:["Categories of ",N.cat_url]}),0==r.length?Object(d.jsx)("h2",{className:"text-center",children:"Loading..."}):"",Object(d.jsx)("div",{className:"row",children:r.map((function(e){return Object(d.jsx)(C,{item:e},e._id)}))}),x<9?"":Object(d.jsx)(G,{perPage:"8",apiUrlAmount:p+"/products/amount?cat="+l,urlLinkTo:"/products/"+N.cat_url,clsCss:"btn btn-dark me-1"})]})})};var ee=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1],s=Object(i.h)();Object(n.useEffect)((function(){o()}),[]);var o=function(){var t=Object(h.a)(u.a.mark((function t(){var c,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=p+"/products?perPage=5&cat="+e.cat_short_id,t.next=3,f(c);case 3:n=t.sent,console.log(n.data),(r=(r=n.data).filter((function(e){return e._id!=s.id}))).length>4&&r.pop(),a(r);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"my-5",children:[Object(d.jsx)("h2",{className:"text-center",children:"New products in our store"}),Object(d.jsx)("div",{className:"row",children:r.map((function(e){return Object(d.jsx)(C,{item:e},e._id)}))})]})};var te=function(e){var t=Object(n.useContext)(S).addToCart,c=Object(n.useState)({}),r=Object(m.a)(c,2),a=r[0],s=r[1],o=Object(i.h)(),l=Object(i.g)(),j=Object(i.f)();Object(n.useEffect)((function(){b()}),[j]);var b=function(){var e=Object(h.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p+"/products/single/"+o.id,e.next=3,f(t);case 3:c=e.sent,console.log(c.data),s(c.data),y(c.data.short_id);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container p-4",style:{minHeight:"85vh"},children:[Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)("div",{className:"col-md-4",children:Object(d.jsx)("img",{src:a.img_url||"/images/cover.jpg",alt:a.name,className:"img-fluid img-thumbnail shadow"})}),Object(d.jsxs)("div",{className:"col-md-8",children:[Object(d.jsx)("h2",{className:"display-4",children:a.name}),Object(d.jsxs)("p",{children:[Object(d.jsx)("strong",{children:"Info:"})," ",a.info]}),Object(d.jsxs)("h3",{children:["Price: ",a.price," nis"]}),Object(d.jsxs)("h3",{children:["Condition: ",a.condition]}),Object(d.jsxs)("h4",{children:["Quantity: ",a.qty," "]}),Object(d.jsx)("button",{onClick:function(){l(-1)},className:"btn btn-dark",children:"Back"}),a.qty>0?Object(d.jsxs)("button",{onClick:function(){t(a)},className:"btn btn-info ms-2",children:["Add to cart",Object(d.jsx)(_.a,{className:"ms-2 mb-1"}),"+"]}):Object(d.jsx)("button",{className:"btn btn-danger ms-2",children:"SOLD OUT!!!"})]})]}),a.cat_short_id?Object(d.jsx)(ee,{cat_short_id:a.cat_short_id}):""]})};var ce=function(e){var t=Object(i.g)(),c=Object(Y.a)(),n=c.register,r=c.handleSubmit,a=c.formState.errors,s=function(){var e=Object(h.a)(u.a.mark((function e(c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/users/",e.prev=1,e.next=4,g("https://shimonshop.herokuapp.com/users/","POST",c);case 4:e.sent.data._id&&(l.b.success("You sign up"),t("/login")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),11e3==e.t0.response.data.code?l.b.error("Email already in system , try log in"):alert("There problem , try come back later");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),o=n("name",{required:!0,minLength:2}),j=n("email",{required:!0,pattern:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i}),b=n("password",{required:!0,minLength:3}),m=n("address",{required:!1,minLength:2}),O=n("phone",{required:!1,minLength:9});return Object(d.jsxs)("div",{className:"container col-md-6 mx-auto my-5",children:[Object(d.jsx)("h1",{children:"Sign up to the store"}),Object(d.jsxs)("form",{onSubmit:r((function(e){console.log(e),s(e)})),className:"col-12 p-3 border",children:[Object(d.jsx)("label",{children:"* Name:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},o),{},{type:"text",className:"form-control"})),a.name?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid name, min 2 chars"}):"",Object(d.jsx)("label",{children:"* Email:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},j),{},{type:"text",className:"form-control"})),a.email?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Email invalid"}):"",Object(d.jsx)("label",{children:"* Password:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},b),{},{type:"text",className:"form-control"})),a.password?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid password, min 3 chars"}):"",Object(d.jsx)("label",{children:"Address:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},m),{},{type:"text",className:"form-control"})),a.address?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid address, min 2 chars"}):"",Object(d.jsx)("label",{children:"Phone:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},O),{},{type:"text",className:"form-control"})),a.phone?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid phone number, min 9 numbers"}):"",Object(d.jsx)("button",{className:"btn btn-info mt-4",children:"Sign up"})]})]})};var ne=function(e){var t=Object(n.useContext)(S).doFavApi,c=Object(i.g)(),r=Object(Y.a)(),a=r.register,s=r.handleSubmit,o=r.formState.errors,j=function(){var e=Object(h.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/users/login",e.prev=1,e.next=4,g("https://shimonshop.herokuapp.com/users/login","POST",n);case 4:(r=e.sent).data.token&&(l.b.success("You logged in"),a=r.data.token,localStorage.setItem(k,a),c("/"),t()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l.b.error("User password not match, or there another problem");case 11:case"end":return e.stop()}var a}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),b=a("email",{required:!0,pattern:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i}),m=a("password",{required:!0,minLength:3});return Object(d.jsxs)("div",{className:"container col-md-6 mx-auto my-5",children:[Object(d.jsx)("h1",{children:"Login to the store"}),Object(d.jsxs)("form",{onSubmit:s((function(e){console.log(e),j(e)})),className:"col-12 p-3 border",children:[Object(d.jsx)("label",{children:"* Email:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},b),{},{type:"text",className:"form-control"})),o.email?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Email invalid"}):"",Object(d.jsx)("label",{children:"* Password:"}),Object(d.jsx)("input",Object(V.a)(Object(V.a)({},m),{},{type:"text",className:"form-control"})),o.password?Object(d.jsx)("small",{className:"text-danger d-block",children:"* Enter valid password, min 3 chars"}):"",Object(d.jsx)("button",{className:"btn btn-success mt-5",children:"Log in"})]})]})};var re=function(e){var t=Object(n.useContext)(S).doFavApi,c=Object(i.g)();return Object(n.useEffect)((function(){localStorage.removeItem(k),l.b.info("You logged out from system , see you soon!"),c("/"),t()}),[]),Object(d.jsx)("div",{})};var ae=function(e){var t=Object(i.g)();Object(n.useEffect)((function(){localStorage.tok?c():(t("/login"),l.b.warning("You must be logged in user to be here, please log in and come back"))}),[]);var c=function(){var e=Object(h.a)(u.a.mark((function e(){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/users/checkUserToken",e.prev=1,e.next=4,f("https://shimonshop.herokuapp.com/users/checkUserToken");case 4:c=e.sent,console.log(c),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),l.b.warning("You need to log in again."),t("/logout"),console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)(r.a.Fragment,{})};var se=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1];Object(n.useEffect)((function(){s()}),[]);var s=function(){var e=Object(h.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/favs/productsInfo",e.next=3,f("https://shimonshop.herokuapp.com/favs/productsInfo");case 3:t=e.sent,console.log(t.data),a(t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"container-fluid",style:{minHeight:"85vh"},children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(ae,{}),Object(d.jsx)("h1",{className:"text-center",children:"List of products that you added to favorites"}),Object(d.jsx)("h4",{className:"text-center",children:"Click on star to remove them from the list"}),0==r.length?Object(d.jsx)("h2",{className:"text-center",children:"Loading..."}):"",Object(d.jsx)("div",{className:"row",children:r.map((function(e){return Object(d.jsx)(C,{item:e},e._id)}))})]})})};var oe=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(""),o=Object(m.a)(s,2),l=o[0],j=o[1],b=Object(n.useState)(!0),O=Object(m.a)(b,2),x=O[0],g=O[1],v=Object(i.f)();Object(n.useEffect)((function(){g(!0),N()}),[v]);var N=function(){var e=Object(h.a)(u.a.mark((function e(){var t,c,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(window.location.search),c=t.get("s")||"",j(c),n=p+"/products/search?s="+c,e.next=6,f(n);case 6:r=e.sent,console.log(r.data),g(!1),a(r.data);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"container-fluid pb-4",style:{minHeight:"85vh"},children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsxs)("h1",{className:"text-center my-4",children:['Search for "',l,'":']}),x?Object(d.jsx)("h2",{className:"text-center",children:"Loading..."}):"",0!=r.length||x?"":Object(d.jsx)("h2",{className:"text-center",children:"Search not match, try another query"}),Object(d.jsx)("div",{className:"row",children:r.map((function(e){return Object(d.jsx)(C,{item:e},e._id)}))})]})})};var ie=function(e){return Object(d.jsx)("div",{className:"container p-4",style:{minHeight:"85vh"},children:Object(d.jsx)("h2",{children:"Page not found ! 404"})})};var le=function(e){var t=Object(i.g)(),c=e.item;return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e.index+1}),Object(d.jsx)("td",{children:c.status}),Object(d.jsx)("td",{children:c.name}),Object(d.jsx)("td",{children:c.address}),Object(d.jsx)("td",{children:c.total_price}),Object(d.jsx)("td",{children:c.products_ar.length}),Object(d.jsx)("td",{children:Object(d.jsx)("button",{onClick:function(){t("/admin/checkoutInfo/"+c._id)},to:"/",className:"badge bg-info",children:"info"})})]})};var de=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1],s=Object(o.c)(),l=Object(m.a)(s,1)[0],j=Object(i.f)(),b=Object(n.useState)(0),O=Object(m.a)(b,2),x=O[0],g=O[1];Object(n.useEffect)((function(){v()}),[j]);var v=function(){var e=Object(h.a)(u.a.mark((function e(){var t,c,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.get("page")||1,g(t-1),c=p+"/orders/allOrders?page="+t,e.next=5,f(c);case 5:n=e.sent,console.log(n.data),a(n.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(F,{}),Object(d.jsx)("h2",{children:"Checkout of store:"}),Object(d.jsx)(G,{perPage:"5",apiUrlAmount:p+"/orders/allOrdersCount",urlLinkTo:"/admin/checkout",clsCss:"btn btn-info me-1"}),Object(d.jsxs)("table",{className:"table table-striped",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"#"}),Object(d.jsx)("th",{children:"status"}),Object(d.jsx)("th",{children:"name"}),Object(d.jsx)("th",{children:"address"}),Object(d.jsx)("th",{children:"total price"}),Object(d.jsx)("th",{children:"amount of kind of products"}),Object(d.jsx)("th",{children:"info"})]})}),Object(d.jsx)("tbody",{children:r.map((function(e,t){return Object(d.jsx)(le,{item:e,index:t+5*x},e._id)}))})]})]})};var je=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)({}),l=Object(m.a)(s,2),j=l[0],b=l[1],O=Object(i.h)(),x=Object(n.useRef)();Object(n.useEffect)((function(){v()}),[]);var v=function(){var e=Object(h.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p+"/orders/productsInfo/"+O.id,e.next=3,f(t);case 3:c=e.sent,b(c.data.order),a(c.data.products);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(h.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.current.value,c=p+"/orders/"+j._id+"?status="+t,e.next=4,g(c,"PATCH",{});case 4:1==e.sent.data.modifiedCount&&v();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(o.b,{to:"/admin/checkout",children:"back to list"}),j.name?Object(d.jsxs)("article",{children:[Object(d.jsx)("h2",{children:"Order info:"}),Object(d.jsxs)("h3",{children:["Name: ",j.name," , Address: ",j.address," , phone: ",j.phone]}),Object(d.jsxs)("h3",{children:["Status of order: ",j.status]}),Object(d.jsxs)("div",{className:"col-md-3",children:[Object(d.jsx)("h4",{children:"Change status:"}),Object(d.jsxs)("select",{defaultValue:j.status,ref:x,onChange:function(){N()},className:"form-select",children:[Object(d.jsx)("option",{value:"pending",children:"Pending"}),Object(d.jsx)("option",{value:"paid",children:"Paid"}),Object(d.jsx)("option",{value:"shipped",children:"Shipped"}),Object(d.jsx)("option",{value:"completed",children:"Completed"}),Object(d.jsx)("option",{value:"canceld",children:"Canceld"})]})]})]}):Object(d.jsx)("h2",{children:"Loading..."}),Object(d.jsxs)("h4",{children:["Total price of order:",j.total_price," nis"]}),Object(d.jsxs)("table",{className:"table table-striped",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"#"}),Object(d.jsx)("th",{children:"name"}),Object(d.jsx)("th",{children:"short_id"}),Object(d.jsx)("th",{children:"img"}),Object(d.jsx)("th",{children:"Price of one item"})]})}),Object(d.jsx)("tbody",{children:r.map((function(e,t){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:t+1}),Object(d.jsx)("td",{title:e.info,children:e.name}),Object(d.jsx)("td",{children:e.short_id}),Object(d.jsx)("td",{children:Object(d.jsx)("img",{src:e.img_url,alt:"pic",height:"50"})}),Object(d.jsx)("td",{children:e.price})]},e._id)}))})]})]})},be=c(32);var ue=function(e){var t=Object(n.useContext)(S),c=t.cart_ar,r=t.setShowCart,a=t.updateCart,s=Object(n.useState)(!1),o=Object(m.a)(s,2),i=o[0],l=o[1],j=Object(n.useState)(!0),b=Object(m.a)(j,2),O=b[0],x=b[1],f=Object(n.useState)(0),v=Object(m.a)(f,2),N=v[0],k=v[1];Object(n.useEffect)((function(){r("none"),console.log(c),c.length>0?(l(!1),x(!0),w()):(l(!0),x(!1))}),[c]);var w=function(){var e=Object(h.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/orders",t=0,n=c.map((function(e){return t+=e.price,{s_id:e.short_id,amount:1,price:e.price}})),k(t),console.log(n),console.log(t),e.next=8,g("https://shimonshop.herokuapp.com/orders","POST",{total_price:t,products_ar:n});case 8:r=e.sent,console.log(r.data),x(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(h.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c.length>0)){e.next=7;break}return p+"/orders/orderPaid/",n={tokenId:t.facilitatorAccessToken,orderId:t.orderID,realPay:"sandbox"},e.next=5,g("https://shimonshop.herokuapp.com/orders/orderPaid/","PATCH",n);case 5:1==e.sent.data.modifiedCount&&(alert("Your order completed"),a([]));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container mt-3",style:{minHeight:"85vh"},children:[Object(d.jsx)(ae,{}),i?Object(d.jsx)("h2",{children:"Cart is empty"}):"",Object(d.jsxs)("div",{className:"row",children:[Object(d.jsxs)("div",{className:"col-md-8",children:[Object(d.jsx)("h3",{children:"Products in cart:"}),Object(d.jsxs)("h4",{children:["Total price: ",N," nis"]}),Object(d.jsxs)("table",{className:"table table-striped",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"#"}),Object(d.jsx)("th",{children:"name"}),Object(d.jsx)("th",{children:"amount"}),Object(d.jsx)("th",{children:"price"}),Object(d.jsx)("th",{children:"del"})]})}),Object(d.jsx)("tbody",{children:c.map((function(e,t){return Object(d.jsxs)("tr",{title:e.info,children:[Object(d.jsx)("td",{children:t+1}),Object(d.jsx)("td",{children:e.name}),Object(d.jsx)("td",{children:"1"}),Object(d.jsx)("td",{children:e.price}),Object(d.jsx)("td",{children:Object(d.jsx)("button",{onClick:function(){!function(e){var t=c.filter((function(t){return t._id!=e}));a(t)}(e._id)},className:"badge bg-warning",children:"X"})})]},e._id)}))})]})]}),Object(d.jsx)("div",{className:"col-md-4",children:O?Object(d.jsx)("h2",{children:"Loading..."}):Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Choose paid method:"}),Object(d.jsx)(be.PayPalButton,{currency:"ILS",amount:N,options:{clientId:"AVC7mEW5RDbALzT1476MY9WJ8b7FnIMlQZ1iINrAieAP_-moVVf5UCTqRFQCPHxadMwGsCr4nhF71Gjd"},onSuccess:function(e,t){console.log("data",t),console.log("details",e),t.orderID&&y(t)},onCancel:function(e){alert("The process end before the payment, try again")}})]})})]})]})};c(67);var he=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1];Object(n.useEffect)((function(){s()}),[]);var s=function(){var e=Object(h.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p+"/orders/userOrder",e.next=3,f("https://shimonshop.herokuapp.com/orders/userOrder");case 3:t=e.sent,c=t.data.filter((function(e){return"pending"!=e.status})),a(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container mt-3",style:{minHeight:"85vh"},children:[Object(d.jsx)(ae,{}),Object(d.jsx)("h2",{children:"Old orders"}),Object(d.jsxs)("table",{className:"table table-striped",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"#"}),Object(d.jsx)("th",{children:"status"}),Object(d.jsx)("th",{children:"total price"}),Object(d.jsx)("th",{children:"Date of order"}),Object(d.jsx)("th",{children:"info"})]})}),Object(d.jsx)("tbody",{children:r.map((function(e,t){var c=e.date_created.replace("T"," ");return c=c.substring(0,c.indexOf(":")+3),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:t+1}),Object(d.jsx)("td",{children:e.status}),Object(d.jsx)("td",{children:e.total_price}),Object(d.jsx)("td",{children:c}),Object(d.jsx)("td",{children:Object(d.jsx)(o.b,{to:"/oldOrders/"+e._id,children:"More info"})})]},e._id)}))})]})]})};var me=function(e){var t=Object(n.useState)([]),c=Object(m.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)({}),l=Object(m.a)(s,2),j=l[0],b=l[1],O=Object(n.useState)(""),x=Object(m.a)(O,2),g=x[0],v=x[1],N=Object(i.h)();Object(n.useEffect)((function(){k()}),[]);var k=function(){var e=Object(h.a)(u.a.mark((function e(){var t,c,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p+"/orders/productsInfo/"+N.idOrder,e.next=3,f(t);case 3:c=e.sent,n=(n=c.data.order.date_created.replace("T"," ")).substring(0,n.indexOf(":")+3),v(n),b(c.data.order),a(c.data.products);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(o.b,{to:"/oldOrders/",children:"back to list"}),j.name?Object(d.jsxs)("article",{children:[Object(d.jsx)("h2",{children:"Order info:"}),Object(d.jsxs)("h3",{children:["Status of order: ",j.status]}),Object(d.jsxs)("h3",{children:["Date: ",g]})]}):Object(d.jsx)("h2",{children:"Loading..."}),Object(d.jsxs)("h4",{children:["Total price of order:",j.total_price," nis"]}),Object(d.jsxs)("table",{className:"table table-striped",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"#"}),Object(d.jsx)("th",{children:"name"}),Object(d.jsx)("th",{children:"short_id"}),Object(d.jsx)("th",{children:"img"}),Object(d.jsx)("th",{children:"Price of one item"})]})}),Object(d.jsx)("tbody",{children:r.map((function(e,t){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:t+1}),Object(d.jsx)("td",{title:e.info,children:e.name}),Object(d.jsx)("td",{children:e.short_id}),Object(d.jsx)("td",{children:Object(d.jsx)("img",{src:e.img_url,alt:"pic",height:"50"})}),Object(d.jsx)("td",{children:e.price})]},e._id)}))})]})]})};var Oe=function(e){return Object(d.jsxs)(o.a,{children:[Object(d.jsxs)(i.d,{children:[Object(d.jsxs)(i.b,{path:"/admin",element:Object(d.jsx)(J,{}),children:[Object(d.jsx)(i.b,{index:!0,element:Object(d.jsx)(Q,{})}),Object(d.jsx)(i.b,{path:"/admin/products",element:Object(d.jsx)($,{})}),Object(d.jsx)(i.b,{path:"/admin/addProduct",element:Object(d.jsx)(D,{})}),Object(d.jsx)(i.b,{path:"/admin/editProduct/:id",element:Object(d.jsx)(B,{})}),Object(d.jsx)(i.b,{path:"/admin/categories",element:Object(d.jsx)(R,{})}),Object(d.jsx)(i.b,{path:"/admin/editCategory/:url_name",element:Object(d.jsx)(Z,{})}),Object(d.jsx)(i.b,{path:"/admin/addcategory",element:Object(d.jsx)(H,{})}),Object(d.jsx)(i.b,{path:"/admin/users",element:Object(d.jsx)(z,{})}),Object(d.jsx)(i.b,{path:"/admin/logout",element:Object(d.jsx)(X,{})}),Object(d.jsx)(i.b,{path:"/admin/checkout",element:Object(d.jsx)(de,{})}),Object(d.jsx)(i.b,{path:"/admin/checkoutInfo/:id",element:Object(d.jsx)(je,{})})]}),Object(d.jsxs)(i.b,{path:"/",element:Object(d.jsx)(U,{}),children:[Object(d.jsx)(i.b,{index:!0,element:Object(d.jsx)(E,{})}),Object(d.jsx)(i.b,{path:"/products/:cat_url",element:Object(d.jsx)(K,{})}),Object(d.jsx)(i.b,{path:"/productsSearch/",element:Object(d.jsx)(oe,{})}),Object(d.jsx)(i.b,{path:"/productInfo/:id",element:Object(d.jsx)(te,{})}),Object(d.jsx)(i.b,{path:"/signup",element:Object(d.jsx)(ce,{})}),Object(d.jsx)(i.b,{path:"/login",element:Object(d.jsx)(ne,{})}),Object(d.jsx)(i.b,{path:"/logout",element:Object(d.jsx)(re,{})}),Object(d.jsx)(i.b,{path:"/products_favs",element:Object(d.jsx)(se,{})}),Object(d.jsx)(i.b,{path:"/checkout",element:Object(d.jsx)(ue,{})}),Object(d.jsx)(i.b,{path:"/oldOrders",element:Object(d.jsx)(he,{})}),Object(d.jsx)(i.b,{path:"/oldOrders/:idOrder",element:Object(d.jsx)(me,{})}),Object(d.jsx)(i.b,{path:"/*",element:Object(d.jsx)(ie,{})})]})]}),Object(d.jsx)(l.a,{position:"top-right",theme:"colored"})]})};var xe=function(){return Object(d.jsx)(r.a.Fragment,{children:Object(d.jsx)(Oe,{})})};s.a.render(Object(d.jsx)(xe,{}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.491760a5.chunk.js.map